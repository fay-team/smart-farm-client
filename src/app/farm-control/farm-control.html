<div class="farm-control-card">
  <h2 class="title">ЁЯМ▒ Smart Farm Controller</h2>
  <p style="color: #718096; margin-bottom: 25px; font-size: 1rem;">
    р╕Др╕зр╕Ър╕Др╕╕р╕бр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣Мр╣Гр╕Щр╕Яр╕▓р╕гр╣Мр╕бр╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░р╕Ьр╣Ир╕▓р╕Щ MQTT
  </p>

  <!-- Mode Selection -->
  <div class="mode-section">
    <label class="mode-label">р╣Ар╕ер╕╖р╕нр╕Бр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓:</label>
    <div class="mode-buttons">
      <button
        class="mode-button"
        [ngClass]="{'active': inputMode === 'duration'}"
        (click)="inputMode = 'duration'"
      >
        <span class="mode-icon">тП▒я╕П</span>
        р╕гр╕░р╕вр╕░р╣Ар╕зр╕ер╕▓
      </button>
      <button
        class="mode-button"
        [ngClass]="{'active': inputMode === 'datetime'}"
        (click)="inputMode = 'datetime'"
      >
        <span class="mode-icon">ЁЯУЕ</span>
        р╕зр╕▒р╕Щр╕Чр╕╡р╣И-р╣Ар╕зр╕ер╕▓
      </button>
    </div>
  </div>

  <!-- Toggle Button for ON/OFF -->
  <div class="toggle-section">
    <label class="toggle-label">р╕кр╕Цр╕▓р╕Щр╕░р╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М:</label>
    <div class="toggle-buttons">
      <button
        class="toggle-button"
        [ngClass]="{'active': selectedAction === 'on'}"
        (click)="selectedAction = 'on'"
      >
        <span class="toggle-icon">ЁЯЯв</span>
        р╣Ар╕Ыр╕┤р╕Ф (ON)
      </button>
      <button
        class="toggle-button"
        [ngClass]="{'active': selectedAction === 'off'}"
        (click)="selectedAction = 'off'"
      >
        <span class="toggle-icon">ЁЯФ┤</span>
        р╕Ыр╕┤р╕Ф (OFF)
      </button>
    </div>
  </div>

  <!-- Duration Input Mode -->
  <div class="input-section" *ngIf="inputMode === 'duration'">
    <label class="input-label">р╣Ар╕зр╕ер╕▓/р╕гр╕░р╕вр╕░р╣Ар╕зр╕ер╕▓:</label>
    <div class="input-group">
      <input
        class="command-input"
        [(ngModel)]="timeInput"
        placeholder="р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: 20:30, 5s, 5m, 2h р╕лр╕гр╕╖р╕н 5 (р╕Щр╕▓р╕Чр╕╡)"
        (keydown.enter)="send()"
      />
      <button class="send-button" (click)="send()">
        <span class="icon">ЁЯУб</span>
        р╕кр╣Ир╕Зр╕Др╕│р╕кр╕▒р╣Ир╕З
      </button>
    </div>
  </div>

  <!-- DateTime Input Mode -->
  <div class="datetime-section" *ngIf="inputMode === 'datetime'">
    <div class="datetime-inputs">
      <div class="datetime-group">
        <label class="input-label">р╕зр╕▒р╕Щр╕Чр╕╡р╣И:</label>
        <input
          type="date"
          class="date-input"
          [(ngModel)]="selectedDate"
        />
      </div>
      <div class="datetime-group">
        <label class="input-label">р╣Ар╕зр╕ер╕▓:</label>
        <input
          type="time"
          class="time-input"
          [(ngModel)]="selectedTime"
        />
      </div>
    </div>
    <button class="send-button full-width" (click)="send()">
      <span class="icon">ЁЯУб</span>
      р╕кр╣Ир╕Зр╕Др╕│р╕кр╕▒р╣Ир╕З
    </button>
  </div>

  <!-- Command Preview -->
  <div class="preview-section" *ngIf="getPreviewCommand()">
    <span class="preview-label">р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╕Ир╕░р╕кр╣Ир╕З:</span>
    <span class="preview-command">{{ getPreviewCommand() }}</span>
  </div>

  <div style="margin-top: 20px; font-size: 0.9rem; color: #718096;">
    <span *ngIf="inputMode === 'duration'">
      ЁЯУЛ р╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╣Ар╕зр╕ер╕▓: HH:MM (р╣Ар╕Кр╣Ир╕Щ 08:30), р╕Ир╕│р╕Щр╕зр╕Щ+р╕лр╕Щр╣Ир╕зр╕в (р╣Ар╕Кр╣Ир╕Щ 5s, 5m, 2h) р╕лр╕гр╕╖р╕нр╕Хр╕▒р╕зр╣Ар╕ер╕В (р╣Ар╕Кр╣Ир╕Щ 5 = 5 р╕Щр╕▓р╕Чр╕╡)
    </span>
    <span *ngIf="inputMode === 'datetime'">
      ЁЯУЛ р╣Ар╕ер╕╖р╕нр╕Бр╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╣Бр╕ер╕░р╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕лр╣Йр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣Мр╕Чр╕│р╕Зр╕▓р╕Щ
    </span>
  </div>
</div><!-- Popup Notification - р╕нр╕вр╕╣р╣Ир╕Щр╕нр╕Б card р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й relative р╕Бр╕▒р╕Ър╕лр╕Щр╣Йр╕▓р╕Ир╕н -->
<div
  *ngIf="showNotification"
  class="notification"
  [ngClass]="{'success': notificationType === 'success', 'error': notificationType === 'error'}"
>
  <div class="notification-content">
    <span class="notification-icon">
      {{ notificationType === 'success' ? 'тЬЕ' : 'тЭМ' }}
    </span>
    <span class="notification-text">{{ notificationMessage }}</span>
  </div>
</div>
